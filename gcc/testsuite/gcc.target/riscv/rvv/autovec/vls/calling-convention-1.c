/* { dg-do compile } */
/* { dg-options "-march=rv64gcv_zvl4096b -mrvv-vector-bits=scalable -mabi=lp64d -O3 -fno-schedule-insns2 -mrvv-max-lmul=m8" } */

#include "def.h"

DEF_RET1_ARG0 (v1qi)
DEF_RET1_ARG0 (v2qi)
DEF_RET1_ARG0 (v4qi)
DEF_RET1_ARG0 (v8qi)
DEF_RET1_ARG0 (v16qi)
DEF_RET1_ARG0 (v32qi)
DEF_RET1_ARG0 (v64qi)
DEF_RET1_ARG0 (v128qi)
DEF_RET1_ARG0 (v256qi)
DEF_RET1_ARG0 (v512qi)
DEF_RET1_ARG0 (v1024qi)
DEF_RET1_ARG0 (v2048qi)
DEF_RET1_ARG0 (v4096qi)

DEF_RET1_ARG1 (v1qi)
DEF_RET1_ARG1 (v2qi)
DEF_RET1_ARG1 (v4qi)
DEF_RET1_ARG1 (v8qi)
DEF_RET1_ARG1 (v16qi)
DEF_RET1_ARG1 (v32qi)
DEF_RET1_ARG1 (v64qi)
DEF_RET1_ARG1 (v128qi)
DEF_RET1_ARG1 (v256qi)
DEF_RET1_ARG1 (v512qi)
DEF_RET1_ARG1 (v1024qi)
DEF_RET1_ARG1 (v2048qi)
DEF_RET1_ARG1 (v4096qi)

DEF_RET1_ARG2 (v1qi)
DEF_RET1_ARG2 (v2qi)
DEF_RET1_ARG2 (v4qi)
DEF_RET1_ARG2 (v8qi)
DEF_RET1_ARG2 (v16qi)
DEF_RET1_ARG2 (v32qi)
DEF_RET1_ARG2 (v64qi)
DEF_RET1_ARG2 (v128qi)
DEF_RET1_ARG2 (v256qi)
DEF_RET1_ARG2 (v512qi)
DEF_RET1_ARG2 (v1024qi)
DEF_RET1_ARG2 (v2048qi)
DEF_RET1_ARG2 (v4096qi)

DEF_RET1_ARG3 (v1qi)
DEF_RET1_ARG3 (v2qi)
DEF_RET1_ARG3 (v4qi)
DEF_RET1_ARG3 (v8qi)
DEF_RET1_ARG3 (v16qi)
DEF_RET1_ARG3 (v32qi)
DEF_RET1_ARG3 (v64qi)
DEF_RET1_ARG3 (v128qi)
DEF_RET1_ARG3 (v256qi)
DEF_RET1_ARG3 (v512qi)
DEF_RET1_ARG3 (v1024qi)
DEF_RET1_ARG3 (v2048qi)
DEF_RET1_ARG3 (v4096qi)

DEF_RET1_ARG4 (v1qi)
DEF_RET1_ARG4 (v2qi)
DEF_RET1_ARG4 (v4qi)
DEF_RET1_ARG4 (v8qi)
DEF_RET1_ARG4 (v16qi)
DEF_RET1_ARG4 (v32qi)
DEF_RET1_ARG4 (v64qi)
DEF_RET1_ARG4 (v128qi)
DEF_RET1_ARG4 (v256qi)
DEF_RET1_ARG4 (v512qi)
DEF_RET1_ARG4 (v1024qi)
DEF_RET1_ARG4 (v2048qi)
DEF_RET1_ARG4 (v4096qi)

DEF_RET1_ARG5 (v1qi)
DEF_RET1_ARG5 (v2qi)
DEF_RET1_ARG5 (v4qi)
DEF_RET1_ARG5 (v8qi)
DEF_RET1_ARG5 (v16qi)
DEF_RET1_ARG5 (v32qi)
DEF_RET1_ARG5 (v64qi)
DEF_RET1_ARG5 (v128qi)
DEF_RET1_ARG5 (v256qi)
DEF_RET1_ARG5 (v512qi)
DEF_RET1_ARG5 (v1024qi)
DEF_RET1_ARG5 (v2048qi)
DEF_RET1_ARG5 (v4096qi)

DEF_RET1_ARG6 (v1qi)
DEF_RET1_ARG6 (v2qi)
DEF_RET1_ARG6 (v4qi)
DEF_RET1_ARG6 (v8qi)
DEF_RET1_ARG6 (v16qi)
DEF_RET1_ARG6 (v32qi)
DEF_RET1_ARG6 (v64qi)
DEF_RET1_ARG6 (v128qi)
DEF_RET1_ARG6 (v256qi)
DEF_RET1_ARG6 (v512qi)
DEF_RET1_ARG6 (v1024qi)
DEF_RET1_ARG6 (v2048qi)
DEF_RET1_ARG6 (v4096qi)

DEF_RET1_ARG7 (v1qi)
DEF_RET1_ARG7 (v2qi)
DEF_RET1_ARG7 (v4qi)
DEF_RET1_ARG7 (v8qi)
DEF_RET1_ARG7 (v16qi)
DEF_RET1_ARG7 (v32qi)
DEF_RET1_ARG7 (v64qi)
DEF_RET1_ARG7 (v128qi)
DEF_RET1_ARG7 (v256qi)
DEF_RET1_ARG7 (v512qi)
DEF_RET1_ARG7 (v1024qi)
DEF_RET1_ARG7 (v2048qi)
DEF_RET1_ARG7 (v4096qi)

DEF_RET1_ARG8 (v1qi)
DEF_RET1_ARG8 (v2qi)
DEF_RET1_ARG8 (v4qi)
DEF_RET1_ARG8 (v8qi)
DEF_RET1_ARG8 (v16qi)
DEF_RET1_ARG8 (v32qi)
DEF_RET1_ARG8 (v64qi)
DEF_RET1_ARG8 (v128qi)
DEF_RET1_ARG8 (v256qi)
DEF_RET1_ARG8 (v512qi)
DEF_RET1_ARG8 (v1024qi)
DEF_RET1_ARG8 (v2048qi)
DEF_RET1_ARG8 (v4096qi)

DEF_RET1_ARG9 (v1qi)
DEF_RET1_ARG9 (v2qi)
DEF_RET1_ARG9 (v4qi)
DEF_RET1_ARG9 (v8qi)
DEF_RET1_ARG9 (v16qi)
DEF_RET1_ARG9 (v32qi)
DEF_RET1_ARG9 (v64qi)
DEF_RET1_ARG9 (v128qi)
DEF_RET1_ARG9 (v256qi)
DEF_RET1_ARG9 (v512qi)
DEF_RET1_ARG9 (v1024qi)
DEF_RET1_ARG9 (v2048qi)
DEF_RET1_ARG9 (v4096qi)

// v1qi tests: return value (lbu) and function prologue (sb)
// 1 lbu per test, argnum sb's when args > 1
/* { dg-final { scan-assembler-times {lbu\s+a0,\s*[0-9]+\(sp\)} 8 } } */
/* { dg-final { scan-assembler-times {sb\s+a[0-7],\s*[0-9]+\(sp\)} 43 } } */

// v2qi test: return value (lhu) and function prologue (sh)
// 1 lhu per test, argnum sh's when args > 1
/* { dg-final { scan-assembler-times {lhu\s+a0,\s*[0-9]+\(sp\)} 8 } } */
/* { dg-final { scan-assembler-times {sh\s+a[0-7],\s*[0-9]+\(sp\)} 43 } } */

// v4qi tests: return value (lw) and function prologue (sw)
// 1 lw per test, argnum sw's when args > 1
/* { dg-final { scan-assembler-times {lw\s+a0,\s*[0-9]+\(sp\)} 8 } } */
/* { dg-final { scan-assembler-times {sw\s+a[0-7],\s*[0-9]+\(sp\)} 43 } } */

// v8qi and v16qi tests: return value (ld) and function prologue (sd)
//   - 1 ld per v8qi and 2 ld per v16qi with args > 1
//   - 2 * argnum sd's per v8qi and 3 * argnum sd's per v16qi when argnum > 1
/* { dg-final { scan-assembler-times {ld\s+a[0-1],\s*[0-9]+\(sp\)} 24 } } */
/* { dg-final { scan-assembler-times {sd\s+a[0-7],\s*[0-9]+\(sp\)} 103 } } */

// v32-4096qi tests: return value (vse8.v)
/* { dg-final { scan-assembler-times {vse8.v\s+v[0-9],\s*[0-9]+\(a0\)} 80 } } */
